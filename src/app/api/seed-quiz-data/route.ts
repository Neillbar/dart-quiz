import { NextResponse } from 'next/server';
import { initializeApp } from 'firebase/app';
import { getFirestore, collection, doc, setDoc } from 'firebase/firestore';

const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,
  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const quizData = [
  { id: 1, name: '1', darts: 0, values: [] },
  { id: 2, name: '2', darts: 1, values: [2] },
  { id: 3, name: '3', darts: 2, values: [1, 2] },
  { id: 4, name: '4', darts: 1, values: [4] },
  { id: 5, name: '5', darts: 2, values: [1, 4] },
  { id: 6, name: '6', darts: 1, values: [6] },
  { id: 7, name: '7', darts: 2, values: [3, 4] },
  { id: 8, name: '8', darts: 1, values: [8] },
  { id: 9, name: '9', darts: 2, values: [1, 8] },
  { id: 10, name: '10', darts: 1, values: [10] },
  { id: 11, name: '11', darts: 2, values: [3, 8] },
  { id: 12, name: '12', darts: 1, values: [12] },
  { id: 13, name: '13', darts: 2, values: [5, 8] },
  { id: 14, name: '14', darts: 1, values: [14] },
  { id: 15, name: '15', darts: 2, values: [7, 8] },
  { id: 16, name: '16', darts: 1, values: [16] },
  { id: 17, name: '17', darts: 2, values: [1, 16] },
  { id: 18, name: '18', darts: 1, values: [18] },
  { id: 19, name: '19', darts: 2, values: [3, 16] },
  { id: 20, name: '20', darts: 1, values: [20] },
  { id: 21, name: '21', darts: 2, values: [5, 16] },
  { id: 22, name: '22', darts: 1, values: [22] },
  { id: 23, name: '23', darts: 2, values: [7, 16] },
  { id: 24, name: '24', darts: 1, values: [24] },
  { id: 25, name: '25', darts: 2, values: [9, 16] },
  { id: 26, name: '26', darts: 1, values: [26] },
  { id: 27, name: '27', darts: 2, values: [3, 24] },
  { id: 28, name: '28', darts: 1, values: [28] },
  { id: 29, name: '29', darts: 2, values: [13, 16] },
  { id: 30, name: '30', darts: 1, values: [30] },
  { id: 31, name: '31', darts: 2, values: [15, 16] },
  { id: 32, name: '32', darts: 1, values: [32] },
  { id: 33, name: '33', darts: 2, values: [1, 32] },
  { id: 34, name: '34', darts: 1, values: [34] },
  { id: 35, name: '35', darts: 2, values: [3, 32] },
  { id: 36, name: '36', darts: 1, values: [36] },
  { id: 37, name: '37', darts: 2, values: [5, 32] },
  { id: 38, name: '38', darts: 1, values: [38] },
  { id: 39, name: '39', darts: 2, values: [7, 32] },
  { id: 40, name: '40', darts: 1, values: [40] },
  { id: 41, name: '41', darts: 2, values: [1, 40] },
  { id: 42, name: '42', darts: 2, values: [10, 32] },
  { id: 43, name: '43', darts: 2, values: [3, 40] },
  { id: 44, name: '44', darts: 2, values: [12, 32] },
  { id: 45, name: '45', darts: 2, values: [5, 40] },
  { id: 46, name: '46', darts: 2, values: [6, 40] },
  { id: 47, name: '47', darts: 2, values: [7, 40] },
  { id: 48, name: '48', darts: 2, values: [16, 32] },
  { id: 49, name: '49', darts: 2, values: [17, 32] },
  { id: 50, name: '50', darts: 2, values: [18, 32] },
  { id: 51, name: '51', darts: 2, values: [19, 32] },
  { id: 52, name: '52', darts: 2, values: [20, 32] },
  { id: 53, name: '53', darts: 2, values: [13, 40] },
  { id: 54, name: '54', darts: 2, values: [14, 40] },
  { id: 55, name: '55', darts: 2, values: [15, 40] },
  { id: 56, name: '56', darts: 2, values: [16, 40] },
  { id: 57, name: '57', darts: 2, values: [17, 40] },
  { id: 58, name: '58', darts: 2, values: [18, 40] },
  { id: 59, name: '59', darts: 2, values: [19, 40] },
  { id: 60, name: '60', darts: 2, values: [20, 40] },
  { id: 61, name: '61', darts: 2, values: [45, 16] },
  { id: 62, name: '62', darts: 2, values: [30, 32] },
  { id: 63, name: '63', darts: 2, values: [39, 24] },
  { id: 64, name: '64', darts: 2, values: [48, 16] },
  { id: 65, name: '65', darts: 2, values: [57, 8] },
  { id: 66, name: '66', darts: 2, values: [42, 24] },
  { id: 67, name: '67', darts: 2, values: [51, 16] },
  { id: 68, name: '68', darts: 2, values: [60, 8] },
  { id: 69, name: '69', darts: 2, values: [57, 12] },
  { id: 70, name: '70', darts: 2, values: [54, 16] },
  { id: 71, name: '71', darts: 2, values: [39, 32] },
  { id: 72, name: '72', darts: 2, values: [48, 24] },
  { id: 73, name: '73', darts: 2, values: [57, 16] },
  { id: 74, name: '74', darts: 2, values: [42, 32] },
  { id: 75, name: '75', darts: 2, values: [51, 24] },
  { id: 76, name: '76', darts: 2, values: [60, 16] },
  { id: 77, name: '77', darts: 2, values: [57, 20] },
  { id: 78, name: '78', darts: 2, values: [54, 24] },
  { id: 79, name: '79', darts: 2, values: [57, 22] },
  { id: 80, name: '80', darts: 2, values: [60, 20] },
  { id: 81, name: '81', darts: 2, values: [57, 24] },
  { id: 82, name: '82', darts: 2, values: [50, 32] },
  { id: 83, name: '83', darts: 2, values: [51, 32] },
  { id: 84, name: '84', darts: 2, values: [60, 24] },
  { id: 85, name: '85', darts: 2, values: [45, 40] },
  { id: 86, name: '86', darts: 2, values: [54, 32] },
  { id: 87, name: '87', darts: 2, values: [51, 36] },
  { id: 88, name: '88', darts: 2, values: [60, 28] },
  { id: 89, name: '89', darts: 2, values: [57, 32] },
  { id: 90, name: '90', darts: 2, values: [60, 30] },
  { id: 91, name: '91', darts: 2, values: [51, 40] },
  { id: 92, name: '92', darts: 2, values: [60, 32] },
  { id: 93, name: '93', darts: 2, values: [57, 36] },
  { id: 94, name: '94', darts: 2, values: [54, 40] },
  { id: 95, name: '95', darts: 2, values: [57, 38] },
  { id: 96, name: '96', darts: 2, values: [60, 36] },
  { id: 97, name: '97', darts: 2, values: [57, 40] },
  { id: 98, name: '98', darts: 2, values: [60, 38] },
  { id: 99, name: '99', darts: 3, values: [57, 10, 32] },
  { id: 100, name: '100', darts: 2, values: [60, 40] },
  { id: 101, name: '101', darts: 3, values: [60, 9, 32] },
  { id: 102, name: '102', darts: 3, values: [48, 14, 40] },
  { id: 103, name: '103', darts: 3, values: [57, 6, 40] },
  { id: 104, name: '104', darts: 3, values: [48, 16, 40] },
  { id: 105, name: '105', darts: 3, values: [60, 13, 32] },
  { id: 106, name: '106', darts: 3, values: [60, 6, 40] },
  { id: 107, name: '107', darts: 3, values: [57, 10, 40] },
  { id: 108, name: '108', darts: 3, values: [60, 16, 32] },
  { id: 109, name: '109', darts: 3, values: [60, 17, 32] },
  { id: 110, name: '110', darts: 3, values: [60, 18, 32] },
  { id: 111, name: '111', darts: 3, values: [57, 14, 40] },
  { id: 112, name: '112', darts: 3, values: [60, 20, 32] },
  { id: 113, name: '113', darts: 3, values: [57, 16, 40] },
  { id: 114, name: '114', darts: 3, values: [60, 14, 40] },
  { id: 115, name: '115', darts: 3, values: [60, 15, 40] },
  { id: 116, name: '116', darts: 3, values: [60, 16, 40] },
  { id: 117, name: '117', darts: 3, values: [60, 17, 40] },
  { id: 118, name: '118', darts: 3, values: [60, 18, 40] },
  { id: 119, name: '119', darts: 3, values: [57, 12, 50] },
  { id: 120, name: '120', darts: 3, values: [60, 20, 40] },
  { id: 121, name: '121', darts: 3, values: [60, 11, 50] },
  { id: 122, name: '122', darts: 3, values: [54, 18, 50] },
  { id: 123, name: '123', darts: 3, values: [57, 16, 50] },
  { id: 124, name: '124', darts: 3, values: [60, 14, 50] },
  { id: 125, name: '125', darts: 3, values: [25, 60, 40] },
  { id: 126, name: '126', darts: 3, values: [57, 19, 50] },
  { id: 127, name: '127', darts: 3, values: [60, 17, 50] },
  { id: 128, name: '128', darts: 3, values: [18, 60, 50] },
  { id: 129, name: '129', darts: 3, values: [19, 60, 50] },
  { id: 130, name: '130', darts: 3, values: [60, 20, 50] },
  { id: 131, name: '131', darts: 3, values: [60, 39, 32] },
  { id: 132, name: '132', darts: 3, values: [25, 57, 50] },
  { id: 133, name: '133', darts: 3, values: [60, 57, 16] },
  { id: 134, name: '134', darts: 3, values: [60, 42, 32] },
  { id: 135, name: '135', darts: 3, values: [25, 60, 50] },
  { id: 136, name: '136', darts: 3, values: [60, 60, 16] },
  { id: 137, name: '137', darts: 3, values: [60, 57, 20] },
  { id: 138, name: '138', darts: 3, values: [60, 54, 24] },
  { id: 139, name: '139', darts: 3, values: [57, 42, 40] },
  { id: 140, name: '140', darts: 3, values: [60, 60, 20] },
  { id: 141, name: '141', darts: 3, values: [60, 57, 24] },
  { id: 142, name: '142', darts: 3, values: [60, 42, 40] },
  { id: 143, name: '143', darts: 3, values: [60, 51, 32] },
  { id: 144, name: '144', darts: 3, values: [60, 60, 24] },
  { id: 145, name: '145', darts: 3, values: [60, 45, 40] },
  { id: 146, name: '146', darts: 3, values: [60, 54, 32] },
  { id: 147, name: '147', darts: 3, values: [60, 51, 36] },
  { id: 148, name: '148', darts: 3, values: [60, 60, 28] },
  { id: 149, name: '149', darts: 3, values: [60, 57, 32] },
  { id: 150, name: '150', darts: 3, values: [60, 54, 36] },
  { id: 151, name: '151', darts: 3, values: [60, 51, 40] },
  { id: 152, name: '152', darts: 3, values: [60, 60, 32] },
  { id: 153, name: '153', darts: 3, values: [60, 57, 36] },
  { id: 154, name: '154', darts: 3, values: [60, 54, 40] },
  { id: 155, name: '155', darts: 3, values: [60, 57, 38] },
  { id: 156, name: '156', darts: 3, values: [60, 60, 36] },
  { id: 157, name: '157', darts: 3, values: [60, 57, 40] },
  { id: 158, name: '158', darts: 3, values: [60, 60, 38] },
  { id: 159, name: '159', darts: 0, values: [] },
  { id: 160, name: '160', darts: 3, values: [60, 60, 40] },
  { id: 161, name: '161', darts: 3, values: [60, 51, 50] },
  { id: 162, name: '162', darts: 0, values: [] },
  { id: 163, name: '163', darts: 0, values: [] },
  { id: 164, name: '164', darts: 3, values: [60, 54, 50] },
  { id: 165, name: '165', darts: 0, values: [] },
  { id: 166, name: '166', darts: 0, values: [] },
  { id: 167, name: '167', darts: 3, values: [60, 57, 50] },
  { id: 168, name: '168', darts: 0, values: [] },
  { id: 169, name: '169', darts: 0, values: [] },
  { id: 170, name: '170', darts: 3, values: [60, 60, 50] },
  { id: 171, name: '171', darts: 0, values: [] },
  { id: 172, name: '172', darts: 0, values: [] },
  { id: 173, name: '173', darts: 0, values: [] },
  { id: 174, name: '174', darts: 0, values: [] },
  { id: 175, name: '175', darts: 0, values: [] },
  { id: 176, name: '176', darts: 0, values: [] },
  { id: 177, name: '177', darts: 0, values: [] },
  { id: 178, name: '178', darts: 0, values: [] },
  { id: 179, name: '179', darts: 0, values: [] },
  { id: 180, name: '180', darts: 0, values: [] }
];

export async function GET() {
  try {
    const quizCollection = collection(db, 'dartQuizOptions');
    
    for (const quiz of quizData) {
      const docRef = doc(quizCollection, quiz.id.toString());
      await setDoc(docRef, {
        name: quiz.name,
        darts: quiz.darts,
        values: quiz.values,
        isNoOutshot: quiz.darts === 0,
        createdAt: new Date()
      });
    }
    
    return NextResponse.json({ 
      success: true, 
      message: 'Quiz data uploaded successfully',
      totalItems: quizData.length 
    });
  } catch (error) {
    return NextResponse.json({ 
      success: false, 
      error: error instanceof Error ? error.message : 'Unknown error occurred' 
    }, { status: 500 });
  }
}